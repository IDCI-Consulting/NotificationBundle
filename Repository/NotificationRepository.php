<?php

namespace IDCI\Bundle\NotificationBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * NotificationRepository 
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class NotificationRepository extends EntityRepository
{
    /**
     * Get Notification by status
     *
     * @param string $status
     * @return Notification
     */
    public function getNotificationsByStatus($status)
    {
        $result = $this->createQueryBuilder("n")
            ->where('n.status = :status')
            ->setParameter('status', $status)
            ->getQuery()
            ->getResult()
        ;

        return empty($result) ? array() : $result;
    }

    /**
     * Get Notification by type
     *
     * @param string $type
     * @return Notification
     */
    public function getNotificationsByType($type)
    {
        $result = $this
            ->createQueryBuilder("n")
            ->select('n')
            ->where('n.id = :id')
            ->setParameter('id', $type)
            ->getQuery()
            ->getArrayResult()
        ;

        return empty($result) ? array() : $result;
    }

    /**
     * Get Notification by source
     *
     * @param string $source
     * @return Notification
     */
    public function getNotificationsBySource($source)
    {
        $result = $this
            ->createQueryBuilder("n")
            ->select('n')
            ->where('n.id = :id')
            ->setParameter('id', $source)
            ->getQuery()
            ->getArrayResult()
        ;

        return empty($result) ? array() : $result;
    }
    
    /**
     * Get Notification between two created_at dates
     *
     * @return Notification
     */
    public function getNotificationsBetweenTwoDates()
    {
        $dateNow = new DateTime();
        $result = $this
            ->createQueryBuilder("n")
            ->select('n')
            ->where('n.id = :id')
            ->andWhere('')
            ->getQuery()
            ->getArrayResult()
        ;

        return empty($result) ? array() : $result;
    }

    /**
     * Get Notification between two updated_at dates
     *
     * @return Notification
     */
    public function getNotificationsBetweenTwoUpdateDates()
    {
        $dateNow = new DateTime();
        $result = $this
             ->createQueryBuilder("n")
             ->select('n')
             ->where('n.id = :id')
             ->getQuery()
             ->getArrayResult()
        ;

        return empty($result) ? array() : $result;
    }
}
